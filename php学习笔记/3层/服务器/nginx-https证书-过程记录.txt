https://www.cnblogs.com/wuguofeng/p/14991187.html

1、1.1 生成秘钥key,运行
openssl genrsa -des3 -out server.key 2048

2、 1.2 取消密码
openssl rsa -in server.key -out server.key

1.3 申请server.csr  需要填写 域名
openssl req -new -key server.key -out server.csr


1.4 创建CA证书:
openssl req -new -x509 -key server.key -out ca.crt -days 3650

1.5 创建server.crt
创建自当前日期起有效期为期十年的服务器证书server.crt：

openssl x509 -req -days 3650 -in server.csr -CA ca.crt -CAkey server.key -CAcreateserial -out server.crt

ls你的文件夹,可以看到一共生成了5个文件:
ca.crt ca.srl server.crt server.csr server.key
其中,server.crt和server.key就是你的nginx需要的证书文件.

2.2 nginx配置
打开你的nginx配置文件,搜索443找到https的配置,去掉这段代码的注释.或者直接复制我下面的这段配置:
server {
        listen       443 ssl;
        server_name  localhost;
	#ssl on;
	ssl_certificate server.crt;
	ssl_certificate_key server.key;
    ssl_session_timeout  5m;
	ssl_protocols SSLv2 SSLv3 TLSv1;
	ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
	ssl_prefer_server_ciphers on;
 
 
        location / {
            root   html;
            index  index.html index.htm;
        }
    }
 

3、自动跳转https配置
nginx 80端口重定向到443端口，也就是http访问自动跳转到https
配置如下：
server {
    listen 80;
    server_name www.域名.com;
    rewrite ^(.*)$ https://${server_name}$1 permanent;
}
server {
    listen 443 ssl;
    server_name www.域名.com;
    ssl_certificate server.crt;
    ssl_certificate_key server.key;
    ....
}


报错情况：
此站点的连接不安全img0.wbiao.com.cn 使用不受支持的协议。
ERR_SSL_VERSION_OR_CIPHER_MISMATCH
不支持的协议
客户端和服务器不支持常用的 SSL 协议版本或密码套件。

解决： 仍然没有头绪
分析： 对于openssl 没有足够的熟悉
